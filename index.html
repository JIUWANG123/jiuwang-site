<style>
  .floating-object {
    position: fixed;
    pointer-events: none;
    z-index: 9999;
    animation: float 10s linear infinite;
    opacity: 0.5;
  }
  @keyframes float {
    0% {
      transform: translateY(100vh) translateX(0);
    }
    100% {
      transform: translateY(-10vh) translateX(20vw);
    }
  }
</style>
<script>
  const floatingSymbols = ['ğŸŒ¹','ğŸ¦‹','âœ','ğŸ•¯','ğŸ—¡','ğŸ¦‡'];
  function spawnFloating() {
    const el = document.createElement('div');
    el.className = 'floating-object';
    el.style.left = Math.random() * window.innerWidth + 'px';
    el.style.top = window.innerHeight + 'px';
    el.style.fontSize = (20 + Math.random() * 20) + 'px';
    el.textContent = floatingSymbols[Math.floor(Math.random() * floatingSymbols.length)];
    document.body.appendChild(el);
    setTimeout(() => el.remove(), 12000);
  }
  setInterval(spawnFloating, 1000);
</script>

// æé—®ç®±é€»è¾‘
    const qForm = document.getElementById('question-form');
    const qDisplay = document.getElementById('question-display');

    qForm.addEventListener('submit', e => {
      e.preventDefault();
      const name = document.getElementById('q-name').value.trim() || 'åŒ¿å';
      const question = document.getElementById('q-text').value.trim();
      const anonymous = document.getElementById('q-anonymous').checked;
      if (!question) return;
      fetch('/question', {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify({ name, question, anonymous })
      }).then(() => {
        qForm.reset();
        loadQuestions();
      });
    });

    function loadQuestions() {
      fetch('/question')
        .then(res => res.json())
        .then(questions => {
          qDisplay.innerHTML = '';
          questions.forEach((entry, index) => {
            if (entry.hidden) return;
            const div = document.createElement('div');
            div.className = 'message';
            let html = `<strong>${entry.name}</strong>ï¼š${entry.question}`;
            if (entry.answer) html += `<div style="margin-top:0.3em;color:#aaa;"><em>ç­”ï¼š</em>${entry.answer}</div>`;
            if (isLoggedIn()) {
              html += `<div style="margin-top:0.5em;">
                <button onclick="reply(${index})" class="reply-button">å›å¤</button>
                <button onclick="hide(${index})" class="hide-button">éšè—</button>
              </div>`;
            }
            div.innerHTML = html;
            qDisplay.appendChild(div);
          });
        });
    }

    function reply(index) {
      const answer = prompt('è¾“å…¥ä½ çš„å›å¤ï¼š');
      const pw = prompt('è¯·è¾“å…¥å¯†ç ï¼š');
      fetch('/question/reply', {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify({ index, answer, pw })
      }).then(() => loadQuestions());
    }

    function hide(index) {
      const pw = prompt('è¯·è¾“å…¥å¯†ç ç¡®è®¤éšè—ï¼š');
      fetch('/question/hide', {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify({ index, pw })
      }).then(() => loadQuestions());
    }

    loadQuestions();
